#!/bin/sh
set -e

# Source dispatch library (central first, local fallback)
_lib="${HOME}/.git-templates/hooks/_lib/dispatch.sh"
[ -f "$_lib" ] || _lib="$(dirname "$0")/_lib/dispatch.sh"
# shellcheck source=_lib/dispatch.sh
. "$_lib"

# Beads first so its staged JSONL is included in pre-commit's lint pass
run_beads pre-commit
run_precommit pre-commit
